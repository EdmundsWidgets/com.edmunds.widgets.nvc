!function(a){"use strict";var b=a.Util,c="Microsoft Internet Explorer"===navigator.appName?!0:!1,d=function(a,b,c){return d=document.getElementsByClassName?function(a,b,c){c=c||document;for(var d,e=c.getElementsByClassName(a),f=b?new RegExp("\\b"+b+"\\b","i"):null,g=[],h=0,i=e.length;i>h;h+=1)d=e[h],(!f||f.test(d.nodeName))&&g.push(d);return g}:document.evaluate?function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g="",h="http://www.w3.org/1999/xhtml",i=document.documentElement.namespaceURI===h?h:null,j=[],k=0,l=f.length;l>k;k+=1)g+="[contains(concat(' ', @class, ' '), ' "+f[k]+" ')]";try{d=document.evaluate(".//"+b+g,c,i,0,null)}catch(m){d=document.evaluate(".//"+b+g,c,null,0,null)}for(;e=d.iterateNext();)j.push(e);return j}:function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g=[],h="*"===b&&c.all?c.all:c.getElementsByTagName(b),i=[],j=0,k=f.length;k>j;j+=1)g.push(new RegExp("(^|\\s)"+f[j]+"(\\s|$)"));for(var l=0,m=h.length;m>l;l+=1){d=h[l],e=!1;for(var n=0,o=g.length;o>n&&(e=g[n].test(d.className),e);n+=1);e&&i.push(d)}return i},d(a,b,c)},e=a.NVC=function(c,f,g){var h,i,j=f;this.getDealerApiKey=function(){return j},a.Widget.call(this,c,g),this.htmlSetup=function(){function c(a){var b;for(b in a)return!1;return!0}function f(){return r&&v&&s?(x.removeAttribute("disabled"),void 0):(x.setAttribute("disabled","disabled"),void 0)}function g(){f(),i[1].className+=/disable/.test(i[1].className)?"":" disable",i[2].className+=/disable/.test(i[2].className)?"":" disable"}var j=this,k=j.getBaseId(),l=j.getBaseClass(),m=j.getRootElement(),n=this.getOptions(),o=EDMUNDSAPI.Vehicle,p=this.getApiKey(),q=this.getDealerApiKey(),r=!1,s=!1,t={radius:100,rows:5,isPublic:!1,bookName:"DealerLocatorRuleBook",apiKey:q,premierOnly:!0,keywords:n.dealerKeywords},u=this.zip="string"==typeof n.zip?n.zip:"",v=u?!0:!1,w="";if((navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(w="apple-device"),t.zipcode=u,null===m)throw new Error("Root element was not found.");m.innerHTML=b.renderTemplate(e.template,{titleTooltip:e.TOOLTIP_TITLE,baseId:k,nav:w,baseClass:j.getBaseClass()});var x=document.getElementById(k+"_button"),y=document.getElementById(k+"_button2"),z=document.getElementById(k+"_button3"),A=d(l+"-list-dealer","div",document)[0],B=document.getElementById(k+"_list_options"),C=document.getElementById(k+"_price"),D=document.getElementById(k+"_zip_location"),E=document.getElementById(k+"_zip_mi"),F=document.getElementById(k+"_form"),G=document.getElementById(k+"_tmvprice");return i=document.getElementById(k+"_tabs").getElementsByTagName("div"),h=document.getElementById(k+"_tab_content"),this.styleConfigurator=new a.nvc.StyleConfigurator({apiKey:p,includedMakes:n.includedMakes}),document.getElementById(k+"_filters").appendChild(this.styleConfigurator.render().el),this.vehiclePhotos=new a.nvc.VehiclePhotos(p,n.colorScheme),document.getElementById(k+"_vehicle_details").appendChild(this.vehiclePhotos.el),this.vehicleDetails=new a.nvc.VehicleDetails,document.getElementById(k+"_vehicle_details").appendChild(this.vehicleDetails.el),this.vehicleDetails2=new a.nvc.VehicleDetails,document.getElementById(k+"_vehicle_details2").appendChild(this.vehicleDetails2.el),this.vehicleDetails3=new a.nvc.VehicleDetails,document.getElementById(k+"_vehicle_details3").appendChild(this.vehicleDetails3.el),this.vehicleOptions=new a.nvc.VehicleOptions(p,k,n.styleId,u),this.zipField=new a.ui.ZipField({apiKey:p,zip:u}),this.zipUpdate=new a.ui.ZipUpdate({apiKey:p,zip:u}),document.getElementById(k+"_zip_configure").appendChild(this.zipUpdate.el),this.zipUpdate.render(),this.configLeadForm=new a.nvc.ConfigLeadForm(p),this.vehiclePrice=new a.nvc.VehiclePrice,this.dealers=new a.nvc.VehicleDealers(t.apiKey),this.messageDialog=new a.nvc.MessageDialog,this.zipMiField=new a.nvc.ZipMiField(E,p,t),this.zipLocation=new a.nvc.ZipLocation(D,p),this.optionsList=new a.nvc.OptionsList(B,p),this.vehicleForm=new a.ui.VehicleForm,this.vehicleForm.render(F),this.vehicleApi=new o(p),x.onclick=function(){j.showTab(i[1]),j.vehiclePrice.updateGraph()},y.onclick=function(){j.showTab(i[2])},z.onclick=function(){function b(a){m.appendChild(j.messageDialog.render(a).el),j.messageDialog.init(),j.messageDialog.on("reset",function(){j.showTab(i[0]),j.styleConfigurator.reset(),j.zipUpdate.zipField.reset(u),j.vehicleForm.resetValues(),j.styleConfigurator.loadMakes()})}var e,f,g,h=j.configLeadForm.config,k={isSuccess:!0,name:h.year+" "+h.make+" "+h.model,dealers:[]},l=[],n=[],o=c(h.dealers),p=d("msg-error","div",z.parentNode)[0],r=document.createElement("div"),s=new EDMUNDSAPI.Vehicle(q);if(p&&z.parentNode.removeChild(p),o)return r.className="msg-error",r.innerHTML="At least 1 dealer must be selected.",z.parentNode.appendChild(r),void 0;for(f in h.dealers)l.push(f),k.dealers.push(h.dealers[f].name);for(g in h.options)n.push(g);e=["make="+h.make,"model="+h.modelNiceName,"year="+h.year,"style="+h.styleid,"optIds="+n.join(","),"pqrf_sbmtdlr="+l.join("&pqrf_sbmtdlr="),"zip="+h.zip,"firstname="+h.firstname,"lastname="+h.lastname,"email="+h.email,"area_code="+h.phoneCode,"phone_prefix="+h.phonePrefix,"phone_suffix="+h.phoneSuffix,"client_key="+a.util.ClientKeyGenerator.generate(16,36)].join("&");var t=z.innerHTML;z.setAttribute("disabled","disabled"),z.innerHTML="Getting dealer quotes...";var v=!0,w=5e3;setTimeout(function(){v&&(v=!1,k.isSuccess=!1,b(k),z.removeAttribute("disabled"),z.innerHTML=t)},w),s.submitLeadForm(e,function(a){v&&(v=!1,k.isSuccess=!a.error,b(k),z.removeAttribute("disabled"),z.innerHTML=t)})},this.styleConfigurator.on("complete",function(a){t.makeName=a.makeName,t.model=a.modelName,t.styleId=a.styleId,this.configLeadForm.setOption("make",a.makeId),this.configLeadForm.setOption("makeName",a.makeName),this.configLeadForm.setOption("model",a.modelName),this.configLeadForm.setOption("modelNiceName",a.modelNiceName),this.configLeadForm.setOption("year",a.yearName),this.configLeadForm.setOption("styleName",a.styleName),this.configLeadForm.setOption("styleid",a.styleId),s=!1,f(),this.zip?(this.zipUpdate.enable(),this.vehiclePhotos.loadPhotos(a.styleId),this.vehicleOptions.loadOptions(a.styleId)):(this.zipUpdate.showZipError(),this.zipUpdate.disable()),r=!0,f(),this.resizeOptionsContainer(),j.zipMiField.render(p),j.zipMiField.zipField.el.value=t.zipcode,j.zipLocation.render(p),j.zipLocation.zipField.el.value=t.zipcode,j.zipLocation.loadlocation(),j.configLeadForm.setOption("zip",t.zipcode),j.optionsList&&(j.optionsList.el.innerHTML=""),j.zipLocation.off("location-load"),j.zipLocation.on("location-load",function(){var a=j.zipLocation.zipField.el.value;j.zipMiField.zipField.el.value=a,j.zipUpdate.zipField.el.value=a,j.configLeadForm.setOption("options",j.vehicleOptions.selectedList),j.vehicleOptions.zipCode=a,j.optionsList.on("render",function(){j.resizeTMVTab()}),t.zipcode=a,j.configLeadForm.setOption("zip",a),j.dealers.loadDealers(A,t),j.optionsList.loadList(a,t.styleId,j.vehicleOptions.selectedList)}),j.vehicleOptions.off("update-selected"),j.vehicleOptions.on("update-selected",function(a){var b=j.zipLocation.zipField.el.value;j.optionsList.list=a,j.configLeadForm.setOption("options",a),j.optionsList.loadList(b,t.styleId,a)}),j.optionsList.off("listLoad"),j.optionsList.on("listLoad",function(a){var b=j.configLeadForm.config,c={name:[b.year,b.makeName,b.model].join(" "),description:b.styleName};c.price=a.msrp.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(","),j.vehicleDetails.render(c,!0),j.vehicleDetails2.render(c,!1),j.vehicleDetails3.render(c,!1),j.totalPrice=a,j.vehiclePrice.render(C,j.totalPrice),j.resizeTMVTab(),j.configLeadForm.setOption("price",a),j.configLeadForm.setOption("options",j.vehicleOptions.selectedList);var d=a.tmv;d=d.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(","),G.innerHTML='True Market Value<sub>&reg;</sub>:&nbsp;<sub class="currency">$</sub><span class="price">'+d+"</span>"}),j.optionsList.off("del-option"),j.optionsList.on("del-option",function(a){var b=j.vehicleOptions,c=(j.optionsList,a.element),e=(c.parentNode.parentNode.parentNode,b.getFeatureById(a.id)),f=b.getFeatureElementById(a.id),g=e.category,h=e.group,i=document.getElementById(k+"_"+e.category+"_"+e.group),l=d("foot","div",i.parentNode)[0].getElementsByTagName("button")[0],m=b.getInstanceByCategoryGroup(g,h);f.checked=!1,m.trigger("change",{element:f,options:e,head:i,footBtn:l},{silent:!0})}),j.zipMiField.off("update-dealers"),j.zipMiField.on("update-dealers",function(){var a=j.zipMiField.zipField.el.value,b=d("msg-error","div",z.parentNode)[0];j.zipLocation.zipField.el.value=a,j.zipLocation.zip=a,t.radius=j.zipMiField.miField.el.value,t.zipcode=a,j.vehicleOptions.zipCode=a,j.configLeadForm.setOption("radius",j.zipMiField.miField.el.value),j.configLeadForm.setOption("zip",a),j.zipLocation.loadlocation(),b&&z.parentNode.removeChild(b)}),i[1].className=i[1].className.replace("disable",""),i[2].className=i[2].className.replace("disable","")},this),this.styleConfigurator.on("error",function(a){m.appendChild(j.messageDialog.render({isSuccess:!1,text:a||'<p>Something went wrong!</p><p>Please return and try again or <a href="Mailto:api@edmunds.com">contact</a> us directly.</p>'}).el),j.messageDialog.init()}),this.vehicleOptions.on("loaderror",function(){x.setAttribute("disabled","disabled"),g()}),this.styleConfigurator.on("reset",function(){this.vehiclePhotos.reset(),this.vehicleDetails.reset(),this.vehicleOptions.reset(),this.configLeadForm.reset({contacts:!0,zip:!0}),this.vehicleForm.resetValues(),r=!1,g()},this),this.zipUpdate.on("update",function(a){var b=this.configLeadForm.config.styleid;s=!1,f(),t.zipcode=a,this.configLeadForm.setOption("zip",a),this.vehicleOptions.zipCode=a,v=!0,r&&(this.vehiclePhotos.loadPhotos(b),this.vehicleOptions.loadOptions(b))},this),this.vehicleOptions.on("load",function(){s=!0,f()},this),this.vehicleOptions.on("change",function(a,b){b&&b.silent}),this.dealers.on("dealer-selected",function(a){var b=d("msg-error","",z.parentNode)[0];this.configLeadForm.setOption("dealers",a),b&&z.parentNode.removeChild(b)},this),this.dealers.on("dealersLoad",function(){this.configLeadForm.setOption("dealers",{})},this),this.dealers.on("render",function(){this.resizePriceQuotesTab()},this),this.dealers.on("dealers-available",function(a){var b=d("msg-error","div",z.parentNode)[0];this.vehicleForm.changeAvailable(a),z.disabled=!a,a||b&&z.parentNode.removeChild(b)},this),this.vehicleForm.on("update-request-form",function(a){this.configLeadForm.setOption(a.name,a.value)},this),this.configLeadForm.on("readytosubmit",function(a){z.disabled=!a},this),i[0].onclick=function(){return/disable/.test(this.className)||j.trigger("tab:show",this),!1},i[1].onclick=function(){return/disable/.test(this.className)||j.trigger("tab:show",this),j.vehiclePrice.updateGraph(),!1},i[2].onclick=function(){return/disable/.test(this.className)||j.trigger("tab:show",this),!1},this.bindEvents(),this.zipUpdate.disable(),p&&q&&v&&(this.styleConfigurator.loadMakes(),this.zipUpdate.enable()),this},this.showTab=function(a){var b,c=a.id.split("-").pop(),e=this.getBaseId(),f=this.getBaseClass(),g=d(f+"-tab-inner","",h),j=g.length;for(b=0;j>b;b+=1){var k=i[b].className;i[b].className="tab"+(b+1),/disable/.test(k)&&(i[b].className+=" disable"),g[b].className=f+"-tab-inner hide"}return a.className=c+" active",document.getElementById(e+"_"+c).className=f+"-tab-inner",this.trigger(c+":showed"),this}},f=e.prototype;b.extend(e.prototype,a.Widget.prototype),f.bindEvents=function(){return this.off(),this.on("tab:show",this.showTab,this),this.on("tab2:showed",this.resizeTMVTab,this),this.on("tab3:showed",this.resizePriceQuotesTab,this),this.vehicleDetails.on("render",this.resizeOptionsContainer,this),this.vehiclePhotos.on("render",this.resizeOptionsContainer,this),this.vehicleOptions.on("render",this.resizeOptionsContainer,this),this},f.trackEvents=function(){function a(a,b,c,d,e){_gaq.push(["_trackEvent",a,b,c,d,e])}this.on("init",function(){a("Widgets","TMV Simple","A simple TMV widget")}),this.on("change:make",function(b){b&&a("Makes",b,"A make was selected")}),this.on("change:model",function(b){b&&a("Models",b,"A model was selected")}),this.on("change:year",function(b){b&&a("Years",b,"A year was selected")}),this.on("change:style",function(b){b&&a("Styles",b,"A style was selected")}),this.on("change:zip",function(b){b&&a("ZIP",b,"A ZIP code was changed")}),this.on("calculate",function(){a("TVM","Click","Pricing Info was requested")}),this.on("load:price",function(){a("TVM","Received","Pricing Info was received")})},f.init=function(a){return a=a||{},this.setOptions(a),this.vehiclesApi=new EDMUNDSAPI.Vehicle(this.getApiKey()),this.zip=a.zip||"",this.trigger("init"),this},f.resizeOptionsContainer=function(){try{var a=document.getElementById(this.getBaseId()+"_tab1"),b=a.children,c=b[0],d=b[1],e=b[2];d.style.height=a.offsetHeight-(c.offsetHeight+e.offsetHeight+15)+"px"}catch(f){}return this},f.resizeListOptions=function(){try{var a=document.getElementById(this.getBaseId()+"_list_options"),b=a.children,c=b[0],d=b[1],e=b[2];d&&c&&e&&a&&(d.style.maxHeight=a.offsetHeight-(c.offsetHeight+e.offsetHeight+25)+"px")}catch(f){}return this.optionsList&&this.optionsList.resize(),this},f.resizeTMVTab=function(){var a,b,c,d=document.getElementById(this.getBaseId()+"_tab2"),e=d.children;if(d&&0!==e.length){try{a=e[0],c=e[1].children[0],b=e[2],c.style.height=d.offsetHeight-(a.offsetHeight+b.offsetHeight+20)+"px",e=c.children;for(var f=0,g=0,h=e.length;h>g;g++)1!==g&&(f+=e[g].offsetHeight);e[1].style.height=c.offsetHeight-f-40+"px",this.resizeListOptions()}catch(i){}return this}},f.resizePriceQuotesTab=function(){var a,b,c,d,e=document.getElementById(this.getBaseId()+"_tab3"),f=e.children;if(e&&0!==f.length){try{a=f[0],c=f[1].children[0],b=f[2],d=f[3],c.style.height=e.offsetHeight-(a.offsetHeight+b.offsetHeight+d.offsetHeight+20)+"px",f=c.children;for(var g=0,h=0,i=f.length;i>h;h++)1!==h&&(g+=f[h].offsetHeight);f[1].style.height=c.offsetHeight-g-20+"px",f[1].children[0].style.maxHeight=f[1].offsetHeight+"px"}catch(j){}return this}},f.render=function(){return this.htmlSetup(),this.reset(),this.trigger("render"),this},f.reset=function(){return this.styleConfigurator.reset(),this},e.template=['<div class="<%= baseClass %>-inner <%= nav %>">','<div class="<%= baseClass %>-header noise-bg">','<span class="title">NEW VEHICLE CONFIGURATOR</span><span class="question" onclick=""><sup>?</sup><div class="nvcwidget-tooltip"><div class="arrow-left"></div><%= titleTooltip %></div></span>',"</div>",'<div class="<%= baseClass %>-tabs" id="<%= baseId %>_tabs">','<div class="tab1 active" id="<%= baseId %>-tab1">Configure</div>','<div class="tab2 disable" id="<%= baseId %>-tab2">TMV&reg;</div>','<div class="tab3 disable" id="<%= baseId %>-tab3">Price Quotes</div>',"</div>",'<div class="<%= baseClass %>-tab-content" id="<%= baseId %>_tab_content">','<div class="<%= baseClass %>-tab-inner" id="<%= baseId %>_tab1">','<div class="noise-bg">','<div class="<%= baseClass %>-filters bottom-shadow">','<div class="filters" id="<%= baseId %>_filters"></div>','<div class="zip-code" id="<%= baseId %>_zip_configure"></div>','<div class="<%= baseClass %>-image" id="<%= baseId %>_vehicle_details"></div>',"</div>","</div>",'<div class="<%= baseClass %>-options-outer">','<form onclick=""><div class="<%= baseClass %>-options" id="<%= baseId %>_options"></div></form>',"</div>",'<div class="<%= baseClass %>-nav-bottom">','<button type="button" disabled="disabled" id="<%= baseId %>_button" class="button-block">Get Price</button>',"</div>","</div>",'<div class="<%= baseClass %>-tab-inner hide" id="<%= baseId %>_tab2">','<div class="<%= baseClass %>-inner-header">','<div class="<%= baseClass %>-image" id="<%= baseId %>_vehicle_details3"></div>',"</div>",'<div class="shadow-top noise-bg">','<div class="<%= baseClass %>-body">','<div class="<%= baseClass %>-inner-zip zip-location" id="<%= baseId %>_zip_location"></div>','<div class="<%= baseClass %>-list-options" id=<%= baseId %>_list_options></div>','<div class="<%= baseClass %>-price" id="<%= baseId %>_price"></div>',"</div>","</div>",'<div class="<%= baseClass %>-top-footer"><button type="button" id="<%= baseId %>_button2">GET PRICE QUOTE</button><span>Next Step</span></div>',"</div>",'<div class="<%= baseClass %>-tab-inner hide" id="<%= baseId %>_tab3">','<div class="<%= baseClass %>-inner-header">','<div class="<%= baseClass %>-image" id="<%= baseId %>_vehicle_details2"></div>','<div class="tmvprice" id="<%= baseId %>_tmvprice"></div>',"</div>",'<div class="shadow-top noise-bg">','<div class="<%= baseClass %>-body">','<div class="<%= baseClass %>-inner-zip" id="<%= baseId %>_zip_mi"></div>','<div class="<%= baseClass %>-list-dealer"></div>','<div class="<%= baseClass %>-body-foot"><a href="#" class="print">print</a><a href="#" class="email">e-mail</a></div>',"</div>","</div>",'<div class="<%= baseClass %>-top-footer" id="<%= baseId %>_form">',"</div>",'<div class="<%= baseClass %>-nav-bottom">','<button type="button" disabled class="button-green" id="<%= baseId %>_button3">GET DEALER QUOTE</button>',"</div>","</div>","</div>",'<div class="<%= baseClass %>-footer">','<a href="http://developer.edmunds.com/tmv_widget_terms" class="copy" target="_blank">Legal Notice</a>','<div class="logo">Built by<a href="http://www.edmunds.com/" target="_blank"></a></div>',"</div>","</div>"].join(""),e.TOOLTIP_TITLE="The New Vehicle Configurator is a tool that helps you customize a new vehicle, see what others in your area are paying for it on average, and get a FREE price quote from a dealership near you.",e.TOOLTIP_TMV="The Edmunds.com TMV® (Edmunds.com True Market Value®) price is the average price that others have paid for this car in the zip code provided.",e.TOOLTIP_INVOICE="This is the price the dealer paid for this car, including destination charges.",e.TOOLTIP_MSRP="This is the price the manufacturer recommends selling the car for. Most consumers end up purchasing their car for less than MSRP.",e.TOOLTIP_TRADEIN="This is the amount you can expect to receive when you trade in your used car and purchase a new car. The trade-in price is usually credited as a down payment on the new car.",e.TOOLTIP_PRIVATEPARTY="This is the amount at which the car is sold to or purchased by a private party, not a car dealer. This amount is usually more than the trade-in price but less than the dealer retail price.",e.TOOLTIP_TMVRETAIL="This is the average price that others have paid for this car in the zip code provided. Dealer retail will usually be higher than private party prices and much higher than trade-in prices.",a.namespace("util").ClientKeyGenerator=function(){function a(a,b){return d.floor(d.random()*(b-a+1)+a)}function b(b,c){for(var d,e=[],f=0;b>f;f++)d=a(0,c-1),e[f]=d.toString(c);return e}function c(a,c){for(var d,e=b(a,c),f=0,g=0,h=1,i=2;a>i;)f+=parseInt(e[h],c)^++g,d=h,h=i,i=d+h;return e[h]=(f%c).toString(c),e.join("")}var d=Math;return{generate:c}}(),a.namespace("ui").Validator=function(){function b(){}var c=/^\-?[0-9]+$/,d=/^\-?[0-9]*\.?[0-9]+$/,e=/^[a-zA-Z0-9.!#$%&amp;'*+\-\/=?\^_`{|}~\-]+@[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)*$/,f=/^[a-z]+$/i,g=a.util.Array.contains;return b.prototype={required:function(a){var b=a.value;return null!==b&&""!==b},alpha:function(a){return f.test(a.value)},decimal:function(a){return d.test(a.value)||!a.value.length},excludeCode:function(a){var b=[222,333,411,444,456,500,555,666,777,911,900,999],c=a.value;return c=parseInt(c,10),!g(b,c)},minLength:function(a){var b=a.value,c=a.maxLength;return b.length===c},email:function(a){return e.test(a.value)},maxValue:function(a){return a.value<=100},integer:function(a){return c.test(a.value)}},b}(),a.namespace("ui").Tooltip=function(){var b=a.ui.View;return b.extend({className:"edm-tooltip",initialize:function(a){this.render(a.text)},render:function(a){var b=document.createElement("div"),c=document.createElement("span");c.innerHTML=a||"",b.className="arrow-left",this.el.appendChild(b),this.el.appendChild(c)},setText:function(a){this.el.getElementsByTagName("span")[0].innerHTML=a},show:function(){this.el.style.display="block"},hide:function(){this.el.style.display="none"}})}(),a.namespace("ui").Button=function(){var b=a.ui.View;return b.extend({tagName:"button",events:{click:"onClick"},onClick:function(){this.trigger("click")},setText:function(a){return this.el.innerHTML=a,this},disable:function(){return this.el.setAttribute("disabled","disabled"),this},enable:function(){return this.el.removeAttribute("disabled"),this}})}(),a.namespace("ui").ZipField=function(){var b=a.ui.View,c=a.ui.Tooltip,d=(a.api.Region,a.event.KeyCode),e=a.util.Array.contains;return b.extend({tagName:"input",className:"zip-field",attributes:{type:"text",placeholder:"ZIP",title:"ZIP Code",maxlength:5},events:{change:"onChange",keyup:"validate",keypress:"onKeyPress",blur:"onBlur"},initialize:function(b){var d=this.tooltip=new c({className:"nvcwidget-tooltip",text:"Please enter a valid Zip Code"});this.defaultZip=b.zip,d.hide(),this.on("valid",d.hide,d),this.on("error",d.show,d),this.on("change",this.validate,this),this.regionApi=new a.api.Region(b.apiKey)},render:function(){var a=document.createElement("label"),b=this.el;return a.innerHTML="ZIP:",this.el.setAttribute("value",this.defaultZip?this.defaultZip:""),b.parentNode&&(b.parentNode.insertBefore(a,b),b.parentNode.insertBefore(this.tooltip.el,b.nextSibling)),this},reset:function(a){var b=a?!0:!1;this.defaultZip=a,this.el.value=a,b===!0?this.trigger("valid",a):this.trigger("error"),this.tooltip.hide()},onChange:function(){this.trigger("change")},validate:function(){var b=this.el.value,c=/\d{5}/,d=a.util.Function.bind(this.onZipLoad,this);return c.test(b)?(this.regionApi.getValidZip(b,d),this):this.trigger("error")},onZipLoad:function(a){var b=this.el.value;return a[b]&&"true"===a[b]?this.trigger("valid",b):this.trigger("error")},onBlur:function(){this.trigger("blur")},onKeyPress:function(a){a=a||window.event;var b=a.which||a.keyCode,c=[d.BACKSPACE,d.DELETE,d.TAB,d.ENTER,d.ARROW_LEFT,d.ARROW_UP,d.ARROW_RIGHT,d.ARROW_DOWN];if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||e(c,b)||String.fromCharCode(b).match(/\d/)))return a.preventDefault&&a.preventDefault(),!1},enable:function(){return this.el.removeAttribute("disabled"),this},disable:function(){return this.el.setAttribute("disabled","disabled"),this}})}(),a.namespace("ui").TextField=function(){var b=a.ui.View,c=a.ui.Tooltip,e=(a.api.Region,a.event.KeyCode,a.util.Array.contains,a.dom.Element),f=new a.ui.Validator;return b.extend({tagName:"input",className:"",attributes:{type:"text"},events:{focus:"hideLabel",blur:"showLabel",change:"validate",keyup:"validate"},initialize:function(a){a.validators&&(this.validators=a.validators)},render:function(a){var b,c,d,e=this.el;return b=document.createElement("label"),b.className=e.name,c=document.createElement("span"),c.className="text-label",c.innerHTML=e.alt,a.appendChild(b),b.appendChild(c),e.maxLength>4&&(d=document.createElement("span"),d.innerHTML="*",c.innerHTML=e.title,c.appendChild(d)),b.appendChild(e),this.renderTooltip(),this},renderTooltip:function(){var a=this.tooltip=new c({className:"nvcwidget-tooltip",text:""});return this.el.parentNode&&this.el.parentNode.insertBefore(this.tooltip.el,this.el.nextSibling),a.hide(),this.on("valid",a.hide,a),this.on("error",a.show,a),this},showLabel:function(){var a=this.el;!a.value&&d("text-label","",a.parentNode)[0]&&(d("text-label","",a.parentNode)[0].style.display="block"),this.tooltip.hide()},hideLabel:function(){d("text-label","",this.el.parentNode)[0]&&(d("text-label","",this.el.parentNode)[0].style.display="none")},reset:function(){this.el.value="",this.showLabel()},validate:function(){var a,b,c=this.validators,d=this.el,g=new e(d.parentNode);this.trigger("focus");for(a in c){if(b=f[a](d),!b)return this.tooltip.setText(c[a].message.replace("%s",d.title)),g.addClass("invalid"),this.trigger("error"),this.trigger("change",{isValid:b,fieldName:d.name,fieldValue:d.value}),void 0;g.removeClass("invalid"),this.trigger("valid")}this.trigger("change",{isValid:b,fieldName:d.name,fieldValue:d.value})}})}(),a.namespace("ui").VehicleForm=function(){var b=a.ui.View,c=(a.ui.Tooltip,a.ui.TextField),e=(a.api.Region,a.event.KeyCode,a.template);return a.util.Array.contains,b.extend({initialize:function(){var a=this.firstname=new c({attributes:{type:"text",name:"firstname",title:"First Name",required:"required",maxlength:100},validators:{required:{message:"The %s field is required"},alpha:{message:"The %s field is invalid"}}}),b=this.lastname=new c({attributes:{type:"text",name:"lastname",title:"Last Name",required:"required",maxlength:100},validators:{required:{message:"The %s field is required"},alpha:{message:"The %s field is invalid"}}}),d=this.email=new c({attributes:{type:"text",name:"email",title:"E-mail",required:"required",maxlength:100},validators:{required:{message:"The %s field is required"},email:{message:"The %s field is invalid"}}}),f=this.phoneCode=new c({className:"code-field",attributes:{type:"text",name:"phoneCode",title:"Area Code",alt:"999",maxLength:3,required:"required"},validators:{required:{message:"The %s field is required"},excludeCode:{message:"Must not be 222, 333, 411, 444, 456, 500, 555, 666, 777, 911, 900, or 999"},decimal:{message:"%s must contain 3 digits"},minLength:{message:"%s must contain 3 digits"},integer:{message:"The %s field is invalid"}}}),g=this.phonePrefix=new c({className:"prefix-field",attributes:{type:"text",name:"phonePrefix",title:"Prefix",alt:"999",maxLength:3,required:"required"},validators:{required:{message:"The %s field is required"},decimal:{message:"%s must contain 3 digits"},minLength:{message:"%s must contain 3 digits"},integer:{message:"The %s field is invalid"}}}),h=this.phoneSuffix=new c({className:"suffix-field",attributes:{type:"text",name:"phoneSuffix",title:"Suffix",alt:"9999",maxLength:4,required:"required"},validators:{required:{message:"The %s field is required"},decimal:{message:"%s must contain 4 digits"},minLength:{message:"%s must contain 4 digits"},integer:{message:"The %s field is invalid"}}});this.fields=[a,b,d,f,g,h],this.template=e(this.template)},bindEvents:function(){this.firstname.on("change",this.validate,this),this.lastname.on("change",this.validate,this),this.email.on("change",this.validate,this),this.phoneCode.on("change",this.validate,this),this.phonePrefix.on("change",this.validate,this),this.phoneSuffix.on("change",this.validate,this)},resetValues:function(){var a=this.fields,b=a.length,c=0;for(c=0;b>c;c+=1)a[c].reset()},render:function(a){var b,c,e=this.fields,f=e.length;for(this.root=a,a&&(a.innerHTML=this.template({})),b=d("form","",a)[0],c=0;f>c;c+=1)e[c].render(b);return this.bindEvents(),this},reset:function(){return this.root.innerHTML="",this},validate:function(a){this.trigger("update-request-form",{name:a.fieldName,value:a.isValid?a.fieldValue:""})},changeAvailable:function(a){var b,c=this.fields;for(b in c)c.hasOwnProperty(b)&&(c[b].el.disabled=a?!1:!0)},template:'<span class="rule"><b>2.</b> Request free price quote by using the form below and find the best deals</span><div class="form"></div>'})}(),a.namespace("nvc").Select=function(){function b(){var a=document.createElement("select"),b=new d(a);c.call(this),this.el=a,this.$el=b,this.initialize.apply(this,arguments),this.bindEvents()}var c=a.mixin.Observable,d=a.dom.Element;return b.prototype={defaultText:"Please select an item",noItems:"Not found items",initialize:function(a){a=a||{},a.title&&this.el.setAttribute("title",a.title),this[a.disabled===!0?"disable":"enable"](),this.defaultText=a.defaultText||this.defaultText,this.noItemsText=a.noItemsText||this.noItemsText},bindEvents:function(){var a=this;this.$el.on("change",function(b){var c=b.target||b.srcElement;a.trigger("change",c.value)})},render:function(b,c){this.empty(),c=c||this.defaultText,c&&this.add({id:"",name:c});var d,e;if(a.util.Array.isArray(b))b.length?d=this.getOptionsFragment(b):this.reset(this.noItemsText);else{d=document.createDocumentFragment();for(e in b){var f=document.createElement("optgroup");f.setAttribute("label",e),f.appendChild(this.getOptionsFragment(b[e])),d.appendChild(f)}}return d&&(this.el.appendChild(d),this.enable()),this},getOptionsFragment:function(a){for(var b,c,d=document.createDocumentFragment(),e=(a=a||[]).length,f=0;e>f;f++)b=a[f],c=document.createElement("option"),c.setAttribute("value",b.id),c.innerHTML=b.name,d.appendChild(c);return d},add:function(a){var b=document.createElement("option");return a=a||{},b.setAttribute("value",a.id||""),b.innerHTML=a.name||a.id||"",this.el.appendChild(b),this},empty:function(){return this.el.innerHTML="",this},reset:function(a){return this.empty(),this.disable(),a=a||this.defaultText,a&&this.add({id:"",name:a}),this.trigger("reset"),this},enable:function(){return this.el.removeAttribute("disabled"),this},disable:function(){return this.el.setAttribute("disabled","disabled"),this}},b}(),a.namespace("nvc").StyleConfigurator=function(){function b(){c.call(this),this.el=document.createElement("div"),this.el.className="vehicle-style-configurator",this.initialize.apply(this,arguments),this.bindEvents()}var c=a.mixin.Observable,d=a.api.Vehicle,e=a.nvc.Select,f=a.util.Array,g=f.isArray,h=f.contains,i=a.util.Function.bind;return b.prototype={initialize:function(a){a=a||{},this.vehicleApi=new d(a.apiKey),this.makeSelect=new e({title:"List of Makes",disabled:!0,defaultText:"List of Makes",noItemsText:"Makes not found"}),this.modelSelect=new e({title:"List of Models",disabled:!0,defaultText:"List of Models",noItemsText:"Models not found"}),this.yearSelect=new e({title:"List of Years",disabled:!0,defaultText:"List of Years",noItemsText:"Years not found"}),this.styleSelect=new e({title:"List of Styles",disabled:!0,defaultText:"List of Styles",noItemsText:"Styles not found"}),this.selectedValues={make:{},model:{},year:{},style:{},makeId:void 0,modelId:void 0,yearId:void 0,styleId:void 0},this.options=a},bindEvents:function(){this.makeSelect.on("change",this.onMakeChange,this),this.modelSelect.on("change",this.onModelChange,this),this.yearSelect.on("change",this.onYearChange,this),this.styleSelect.on("change",this.onStyleChange,this),this.makeSelect.on("reset",this.modelSelect.reset,this.modelSelect),this.modelSelect.on("reset",this.yearSelect.reset,this.yearSelect),this.yearSelect.on("reset",this.styleSelect.reset,this.styleSelect),this.styleSelect.on("reset",function(){this.trigger("reset")},this)},render:function(){var a=this.el;return a.appendChild(this.makeSelect.render().el),a.appendChild(this.modelSelect.render().el),a.appendChild(this.yearSelect.render().el),a.appendChild(this.styleSelect.render().el),this.trigger("render"),this},reset:function(){return this.makeSelect.reset(),this},loadMakes:function(){var a=i(this.onMakesLoad,this),b=i(this.onMakesLoadError,this);this.makeSelect.reset("Loading Makes..."),this.vehicleApi.getListOfMakes("new",a,b)},loadModelsAndYears:function(a){var b=i(this.onModelsAndYearsLoad,this),c=i(this.onModelsAndYearsLoadError,this);this.makeSelect.disable(),this.modelSelect.reset("Loading Models..."),this.vehicleApi.getListOfModelsByMake(a,b,c)},loadStyles:function(a,b,c){var d=i(this.onStylesLoad,this),e=i(this.onStylesLoadError,this);this.makeSelect.disable(),this.modelSelect.disable(),this.yearSelect.disable(),this.styleSelect.reset("Loading Styles..."),this.vehicleApi.getVehicle(a,b,c,d,e)},onMakesLoad:function(a){var b;return a.error?this.onMakesLoadError():(b=this.parseMakes(a),this.makes=b,this.makeSelect.render(b,"Select a Make"),this.trigger("load:makes",b,a),this)},onModelsAndYearsLoad:function(a){var b;return a.error?this.onModelsAndYearsLoadError():(b=this.parseModels(a),this.makeSelect.enable(),this.modelSelect.render(b,"Select a Model"),this.models=a.models,this.parserdModels=b,this.trigger("load:models",b,a),this)},onStylesLoad:function(a){var b;
return a.error?this.onStylesLoadError():(b=this.parseStyles(a),this.makeSelect.enable(),this.modelSelect.enable(),this.yearSelect.enable(),this.styles=b,this.styleSelect.render(b,"Select a Style"),this.trigger("load:styles",b,a),this)},onMakesLoadError:function(){return this.makeSelect.reset("Makes not found"),this.trigger("error",b.MAKES_LOAD_ERROR_TEXT)},onModelsAndYearsLoadError:function(){return this.makeSelect.enable(),this.modelSelect.reset("Models not found"),this.trigger("error",b.MODELS_LOAD_ERROR_TEXT)},onStylesLoadError:function(){return this.makeSelect.enable(),this.modelSelect.enable(),this.yearSelect.enable(),this.styleSelect.reset("Styles not found"),this.trigger("error",b.STYLES_LOAD_ERROR_TEXT)},onMakeChange:function(a){return this.makeId=a,this.makeName=this.getMakeNameById(a),this.modelSelect.reset(),a?(this.loadModelsAndYears(a),this):void 0},onModelChange:function(a){if(this.modelId=a,this.modelName=this.getModelNameById(a),this.modelNiceName=(a||"").split(":")[0],this.yearSelect.reset(),a){var b=this.parseYears(this.models[a],"NEW");return this.yearSelect.render(b,"Select Year"),this}},onYearChange:function(a){var b=this.modelId,c=b.substring(0,b.indexOf(":"));return this.yearId=a,this.styleSelect.reset(),a?(this.loadStyles(this.makeId,c,parseInt(this.yearId,10)),this):void 0},onStyleChange:function(a){var b=this.getSelectedStyle(a);this.styleId=a,this.styleName=b.name,this.trigger("reset"),a&&this.trigger("complete",{makeId:this.makeId,modelId:this.modelId,yearId:this.yearId,styleId:this.styleId,modelNiceName:this.modelNiceName,makeName:this.makeName,modelName:this.modelName,yearName:(this.yearId||"").replace(/\D+/,""),styleName:this.styleName})},getMakeNameById:function(a){for(var b=this.makes,c=b.length,d=0;c>d;d++)if(b[d].id===a)return b[d].name;return""},getModelNameById:function(a){for(var b=this.parserdModels,c=b.length,d=0;c>d;d++)if(b[d].id===a)return b[d].name;return""},getStyleNameById:function(a){for(var b=this.styles,c=b.length,d=0;c>d;d++)if(b[d].id===a)return b[d].name;return""},getSelectedStyle:function(a){for(var b=this.styles,c=b.length,d=0;c>d;d++)if(b[d].id===a)return b[d];return{}},parseMakes:function(a){var b,c,d=[],e=a.makes,f=this.options.includedMakes,g="string"==typeof f?f.split(","):[],i="all"===f;for(b in e)c=e[b],(i||h(g,c.niceName))&&d.push({id:c.niceName,name:c.name});return d},parseModels:function(a){function b(a,b){var c=!1,d=!!a.NEW,e=!!a.USED;switch(b){case"NEW":c=d;break;case"USED":c=e;break;default:c=d||e}return c}function c(a,c){var d,e,f=[];for(d in a)e=a[d],b(e.years,c)&&f.push({id:d,name:e.name});return f}var d=a.models,e="NEW";return"USED"===e||"NEW"===e?c(d,e):c(d)},parseYears:function(a,b){function c(a,b){var c,d,e,f=[];for(a=g(a)?a:[],c=a.length,d=0;c>d;d++)e=a[d],f.push({id:e+b,name:e});return f}var d={},e=a.years;if("USED"===b||"NEW"===b)return c(e[b],b);for(b in e)("USED"===b||"NEW"===b)&&(d[b]=c(e[b],b));return d},parseStyles:function(a){var b,c,d=[],e=a.modelYearHolder[0].styles,f=e.length;for(b=0;f>b;b++)c=e[b],("NEW"===c.publicationState||"NEW_USED"===c.publicationState)&&d.push({id:c.id,name:c.name});return d}},b.MAKES_LOAD_ERROR_TEXT='<p>The makes have not been loaded.</p><p>Please return and try again or <a href="Mailto:api@edmunds.com">contact</a> us directly.</p>',b.MODELS_LOAD_ERROR_TEXT='<p>The models have not been loaded.</p><p>Please return and try again or <a href="Mailto:api@edmunds.com">contact</a> us directly.</p>',b.STYLES_LOAD_ERROR_TEXT='<p>The styles have not been loaded.</p><p>Please return and try again or <a href="Mailto:api@edmunds.com">contact</a> us directly.</p>',b}(),a.namespace("nvc").ConfigLeadForm=function(){function b(a){c.call(this),this.apiKey=a,this.initialize(a),this.bindEvents()}var c=a.mixin.Observable,d=a.util.Array;return d.isArray,d.contains,a.util.Function.bind,b.prototype={initialize:function(a){this.config={apiKey:a,make:"",model:"",year:"",styleid:"",zip:"",options:[],price:{},radius:100,dealers:{},firstname:"",lastname:"",email:"",phoneCode:"",phonePrefix:"",phoneSuffix:""}},setOption:function(a,b){return this.config[a]=b,this.trigger("change"),this},bindEvents:function(){this.on("change",this.validate,this)},validate:function(){var a=!1;this.config.firstname.length&&this.config.lastname.length&&this.config.email.length&&this.config.phoneCode.length&&this.config.phonePrefix.length&&this.config.phoneSuffix.length&&(a=!0),this.trigger("readytosubmit",a)},reset:function(){this.config={apiKey:this.apiKey,make:"",model:"",year:"",styleid:"",zip:"",options:[],price:{},radius:100,dealers:{},firstname:"",lastname:"",email:"",phoneCode:"",phonePrefix:"",phoneSuffix:""}}},b}(),a.namespace("nvc").VehicleDetails=function(){var b=a.ui.View,c=a.template;return b.extend({className:"vehicle-description",render:function(a,b){return this.el.innerHTML=c(this.template,{details:a,showPrice:b,msrpTooltip:e.TOOLTIP_MSRP}),this.trigger("render"),this},reset:function(){return this.el.innerHTML='<span class="default-price">Base MSRP:&nbsp;---</span>',this},template:['<span class="name"><%= details.name %></span>','<span class="desc"><%= details.description %></span>',"<% if(showPrice) { %>",'<span class="price">Base MSRP:<sup>$</sup>','<span class="value" onclick="">',"<%= details.price %>",'<div class="nvcwidget-tooltip"><div class="arrow-left"></div><%= msrpTooltip %></div>',"</span>","</span>","<% } %>"].join("")})}(),a.namespace("nvc").VehiclePhotos=function(){function b(){c.call(this),this.el=document.createElement("div"),this.el.className="vehicle-photos",this.initialize.apply(this,arguments),this.bindEvents()}var c=a.mixin.Observable,d=a.api.Vehicle,e=a.util.Function.bind,f=a.template;return b.prototype={initialize:function(a,b){this.vehicleApi=new d(a),this.template=f(this.template),this.colorScheme=b},bindEvents:function(){},preloadImage:function(a,b){var c=document.createElement("img");c.onload=function(){b(c)},c.src=a},render:function(a){var b=this;return this.preloadImage(a[0],function(a){var c=document.createElement("span");c.className="image",c.appendChild(a),b.el.innerHTML="",b.el.appendChild(c),b.trigger("render")}),this},loadPhotos:function(a){var b=e(this.onPhotosLoad,this);this.vehicleApi.getPhotosByStyleId(a,b)},onPhotosLoad:function(a){var b=this.parsePhotos(a);this.trigger("photosload",b,a),this.render(b)},onPhotosLoadError:function(){this.trigger("photosloaderror")},parsePhotos:function(a){for(var b,c="http://media.ed.edmunds-media.com",d=a.length,e=0,f=[];d>e;e++)if(b=a[e],"exterior"===b.subType&&("S"===b.shotTypeAbbreviation||"FQ"===b.shotTypeAbbreviation))return f.push(c+b.id.replace("dam/photo","")+"_500.jpg"),f;return f},reset:function(){var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANoAAACSCAIAAACsdEONAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0FDNUM4MkZCMTlCMTFFMjkyNTRGRDI4NEFFNEY0NUQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0FDNUM4MzBCMTlCMTFFMjkyNTRGRDI4NEFFNEY0NUQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3QUM1QzgyREIxOUIxMUUyOTI1NEZEMjg0QUU0RjQ1RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3QUM1QzgyRUIxOUIxMUUyOTI1NEZEMjg0QUU0RjQ1RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpUWm78AABCtSURBVHja7J2LeqLK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",b="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMDVGRjc0MkJCRDcxMUUyQjAzNEREMDU1NDBBNkM3MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMDVGRjc0M0JCRDcxMUUyQjAzNEREMDU1NDBBNkM3MyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIwNDY1NjA0QkJENzExRTJCMDM0REQwNTU0MEE2QzczIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIwNDY1NjA1QkJENzExRTJCMDM0REQwNTU0MEE2QzczIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgME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";return this.el.innerHTML="",this.render(["dark"===this.colorScheme?b:a]),this},template:["<% for (var i = 0, length = photos.length; i < length; i++) { %>",'<span class="image"><img src="<%= photos[i] %>"></span>',"<% } %>"].join("")},b}(),a.namespace("nvc").VehiclePrice=function(){function b(){f.call(this),this.initialize(),this.bindEvents()}var f=a.mixin.Observable,g=(EDMUNDSAPI.Vehicle,a.util.Function.bind,a.template);return b.prototype={initialize:function(){this.template=g(this.template)},bindEvents:function(){},render:function(a,b){var c,d,f=b,g=/(?=(?:\d{3})+(?:\.|$))/g;return this.el=a,this.totalPrice=b,f.tmv>f.invoice&&f.tmv<=f.msrp?(c=100*(f.tmv-f.invoice)/(f.msrp-f.invoice),d=0):f.tmv<f.invoice?(c=0,d=100*(f.invoice-f.tmv)/(f.msrp-f.tmv)):f.tmv>f.msrp?(c=100,d=0):(c=0,d=0),this.graphDash=d,f={tmv:f.tmv?f.tmv.toString().split(g).join(","):"N/A",invoice:f.invoice?f.invoice.toString().split(g).join(","):"N/A",msrp:f.msrp?f.msrp.toString().split(g).join(","):"N/A",width:c,leftDash:d,tmvTooltip:e.TOOLTIP_TMV,msrpTooltip:e.TOOLTIP_MSRP,invoiceTooltip:e.TOOLTIP_INVOICE},this.el.innerHTML=this.template({totalPrice:f}),this.updateGraph(),this.trigger("render"),this},updateGraph:function(){var a,b=d("bottom","",this.el)[0],e=c?b.childNodes[1]:d("left","",b)[0],f=c?b.childNodes[0]:d("right","",b)[0],g=d("value","",e)[0].offsetWidth,h=d("value","",f)[0].offsetWidth,i=b.offsetWidth,j=this.graphDash,k=10;j>0&&(a=100*(g+h+k)/i,a>100-j&&!c&&(e.style.marginLeft=100-a+"%"))},reset:function(){this.el.innerHTML=""},template:["<div>","<div>",'<div class="nvcwidget-price-graph">','<div class="top" style="width: <%= totalPrice.width %>%;">','<div class="top-inner">','<span class="name">True Market Value&reg;</span>','<span class="value" onclick=""><sup>$</sup><%= totalPrice.tmv %><div class="nvcwidget-tooltip"><div class="arrow-left"></div><%= totalPrice.tmvTooltip %></div></span>',"</div>","</div>",'<div class="graph">','<div class="left" style="width: <%= totalPrice.width %>%;">','<div class="middle"></div>',"</div>",'<div class="dash" style="left: <%= totalPrice.leftDash %>%;"></div>','<div class="dash rights"></div>','<div class="right"></div>',"</div>",'<div class="bottom">','<div class="right">','<span class="name">MSRP</span>','<span class="value" onclick=""><sup>$</sup><%= totalPrice.msrp %><div class="nvcwidget-tooltip"><div class="arrow-left"></div><%= totalPrice.msrpTooltip %></div></span>',"</div>",'<div class="left" style="margin-left: <%= totalPrice.leftDash %>%;">','<span class="name">Invoice</span>','<span class="value" onclick=""><sup>$</sup><%= totalPrice.invoice %><div class="nvcwidget-tooltip"><div class="arrow-left"></div><%= totalPrice.invoiceTooltip %></div></span>',"</div>","</div>","</div>","</div>","</div>"].join("")},b}(),a.namespace("nvc").ZipMiField=function(){function b(a,b){c.call(this),this.el=a,this.initialize(b),this.bindEvents()}var c=a.mixin.Observable,e=EDMUNDSAPI.Vehicle,f=(a.util.Function.bind,a.template);return b.prototype={initialize:function(a){this.vehicleApi=new e(a),this.template=f(this.template)},bindEvents:function(){this.on("update-dealers",this.updateDealers,this)},render:function(b){var c,e,f,g,h=this;return this.el.innerHTML=this.template({}),c=d("zip-code","",this.el)[0],this.zipField=new a.ui.ZipField({apiKey:b}),c.appendChild(this.zipField.el),this.zipField.render(),this.zipField.valid=!0,e=d("within","",this.el)[0],g=document.createElement("span"),g.innerHTML="mi",f=document.createElement("span"),f.innerHTML="within",e.appendChild(f),this.miField=new a.ui.TextField({attributes:{type:"text",name:"mi",title:"Radius",maxLength:3,value:100},className:"within-field",validators:{decimal:{message:"The %s field is invalid"},maxValue:{message:"%s must be less than 100"}}}),this.miField.valid=!0,e.appendChild(this.miField.el),e.appendChild(g),this.miField.renderTooltip(),this.button=this.el.getElementsByTagName("button")[0],this.button.onclick=function(){h.trigger("update-dealers")},this.miField.on("valid",function(){h.miField.valid=!0,h.validate()}),this.miField.on("error",function(){h.miField.valid=!1,h.validate()}),this.zipField.on("valid",function(){h.zipField.valid=!0,h.validate()}),this.zipField.on("error",function(){h.zipField.valid=!1,h.validate()}),this},validate:function(){return this.zipField.valid&&this.miField.valid?(this.enableButton(),void 0):(this.disabledButton(),void 0)},updateDealers:function(){},enableButton:function(){this.button.disabled=!1},disabledButton:function(){this.button.disabled=!0},template:['<span class="name"><b>1.</b> Select dealer near your location</span>','<div class="zip-code"></div>','<div class="within"></div>','<button type="button" class="button-light">UPDATE</button>'].join("")},b}(),a.namespace("ui").ZipUpdate=function(){var b=a.ui.View,c=a.ui.Button,d=a.ui.ZipField;return b.extend({className:"zipcode-update",initialize:function(a){a=a||{},this.zipCode=a.zip,this.zipField=new d({apiKey:a.apiKey,zip:a.zip}),this.button=new c({className:"button-light"}),this.zipField.on("valid",this.onZipValid,this),this.zipField.on("error",this.onZipError,this),this.zipField.on("blur",this.onZipBlur,this),this.button.on("click",this.onButtonClick,this)},render:function(){var a=this.el;return a.appendChild(this.zipField.el),a.appendChild(this.button.el),this.zipField.render(),this.button.setText("Update"),this},showZipError:function(){return this.zipField.tooltip.show(),this.button.disable(),this},hideZipError:function(){return this.zipField.tooltip.hide(),this},onButtonClick:function(){this.zipCode=this.newZipCode||this.zipCode,this.trigger("update",this.zipCode)},onZipBlur:function(){this.newZipCode||(this.zipField.el.value=this.zipCode,this.hideZipError(),this.button.enable())},onZipValid:function(a){this.newZipCode=a===this.zipCode?null:a,this.newZipCode&&this.button.enable()},onZipError:function(){this.newZipCode=null,this.button.disable(),this.trigger("error")},disable:function(){this.button.disable(),this.zipField.disable()},enable:function(){this.button.enable(),this.zipField.enable()}})}(),a.namespace("nvc").VehicleOptions=function(){function b(a,b,d,e){c.call(this),this.styleId=d,this.selectedList={},this.oldSelectedList={},this.config_invalid=!1,this.baseId=b,this.styleId=d,this.zipCode=e,this.featuresMap=[],this.groupControlsList=[],this.excludedItems=[],this.includedItems=[],this.initialize.apply(this,arguments),this.bindEvents()}var c=a.mixin.Observable,e=EDMUNDSAPI.Vehicle,f=(a.util.Function.bind,a.util.Function),g=a.dom.Element;return a.util.Array,b.prototype={initialize:function(a){this.vehicleApi=new e(a),this.el=document.getElementById(this.baseId+"_options")},bindEvents:function(){return this},parseOptions:function(a){var b,c,d,e,f,g,h,i=a.pricingAttributeGroup,j=a.featuresMap,k={colors:{},options:{},more:{fees:[]}};for(b in j)j.hasOwnProperty(b)&&(j[b].attributeGroups.COLOR_TYPE?(c=j[b].attributeGroups.COLOR_TYPE.attributes.COLOR_TYPE.value,d=j[b].attributeGroups.COLOR_CHIPS.attributes,g=j[b].attributeGroups.COLOR_INFO.attributes.MANUFACTURER_OPTION_NAME.value,k.colors[c.toLowerCase()]=k.colors[c.toLowerCase()]||[],d.PRIMARY_R_CODE&&d.SECONDARY_R_CODE&&d.SECONDARY_G_CODE&&d.SECONDARY_B_CODE?(f={id:b,name:g,category:"colors",group:c.toLowerCase(),type:"radio",price:j[b].price||0,primaryColor:"rgb("+d.PRIMARY_R_CODE.value+", "+d.PRIMARY_G_CODE.value+", "+d.PRIMARY_B_CODE.value+")",secondaryColor:"rgb("+d.SECONDARY_R_CODE.value+", "+d.SECONDARY_G_CODE.value+", "+d.SECONDARY_B_CODE.value+")",status:"available",included:!1},k.colors[c.toLowerCase()].push(f),this.featuresMap.push(f)):d.PRIMARY_R_CODE?(f={id:b,name:g,category:"colors",group:c.toLowerCase(),type:"radio",price:j[b].price||0,primaryColor:"rgb("+d.PRIMARY_R_CODE.value+", "+d.PRIMARY_G_CODE.value+", "+d.PRIMARY_B_CODE.value+")",secondaryColor:"none",status:"available",included:!1},k.colors[c.toLowerCase()].push(f),this.featuresMap.push(f)):(f={id:b,name:g,category:"colors",group:c.toLowerCase(),type:"radio",price:j[b].price||0,primaryColor:"none",secondaryColor:"none",status:"available",included:!1},k.colors[c.toLowerCase()].push(f),this.featuresMap.push(f))):j[b].attributeGroups.OPTION_INFO&&j[b].attributeGroups.OPTION_INFO.attributes&&j[b].attributeGroups.OPTION_INFO.attributes.OPTION_CATEGORY&&(e=j[b].attributeGroups.OPTION_INFO.attributes.OPTION_CATEGORY.value,h=j[b].attributeGroups.OPTION_INFO.attributes.MANUFACTURER_OPTION_NAME.value,k.options[e]=k.options[e]||[],f={id:b,name:h,category:"options",group:e,type:"checkbox",status:"available",included:!1,price:j[b].price||0},k.options[e].push(f),this.featuresMap.push(f)));return i&&i.attributes&&i.attributes.DELIVERY_CHARGE&&i.attributes.DELIVERY_CHARGE.value>0&&(f={name:"Destination Fee",category:"fees",group:"Fees",type:"checkbox",price:i.attributes.DELIVERY_CHARGE.value},k.more.fees.push(f),this.featuresMap.push(f)),i&&i.attributes&&i.attributes.GAS_GUZZLER_TAX&&i.attributes.GAS_GUZZLER_TAX.value>0&&(f={name:"Gas Guzzler Tax",category:"fees",group:"Fees",type:"checkbox",price:i.attributes.GAS_GUZZLER_TAX.value},k.more.fees.push(f),this.featuresMap.push(f)),this.render(k),this.onLoadDependencies(a,"preselect"),this},reset:function(){var a=document.getElementById(this.baseId+"_options");return a&&(a.innerHTML=""),this.featuresMap=[],this.excludedItems=[],this.includedItems=[],this.groupControlsList=[],this.selectedList={},this.oldSelectedList={},this},render:function(b){function c(){var a=Array.prototype.slice.call(arguments);a.unshift("change"),this.trigger.apply(this,a)}var d,e=this.baseId,f=document.getElementById(e+"_options"),g=document.createElement("div"),h=document.createElement("div");if(f.innerHTML="",h.className="name",h.innerHTML="Options",g.className="option-group",g.id=e+"_option_group_options",b.colors)for(d in b.colors){var i=new a.nvc.RadioGroup(f,e,d,b.colors[d],"colors");i.render(),i.init(),i.on("change",this.loadDependencies,this),i.on("change",c,this),this.groupControlsList.push(i)}if(b.options){f.appendChild(g),g.appendChild(h);for(d in b.options){var j=new a.nvc.CheckboxGroup(g,e,d,b.options[d],"options");j.render(),j.init(),j.on("change",this.loadDependencies,this),j.on("change",c,this),this.groupControlsList.push(j)}}if(b.more.fees.length>0){var k=new a.nvc.FeesGroup(f,e,"Fees",b.more.fees,"fees");k.render(),k.init(),k.on("change",this.loadDependencies,this),k.on("change",c,this),this.groupControlsList.push(k)}return this.elements=f.getElementsByTagName("input"),this.bindEvents(),this.trigger("render"),this},loadOptions:function(a){var b=f.bind(this.onLoadOptions,this),c=f.bind(this.onLoadOptionsError,this);this.styleId=a,this.el.innerHTML='<div class="loading">Loading options...</div>',this.vehicleApi.getVehicleConfig(a,this.zipCode,b,c)},onLoadOptionsError:function(){this.el.innerHTML='<div class="loading"><p>Sorry, we have a minor breakdown.</p><p>The options have not been loaded.</p><p>Please, try again later or select different style.</p></div>',this.trigger("loaderror")},onLoadOptions:function(a){return a.errorMessage?(this.el.innerHTML='<div class="loading"><p>Sorry, we don\'t have a default configuration for this style.</p></div>',this.trigger("load"),this):(this.parseOptions(a,this.styleId),this.trigger("load",a),this)},removeFeature:function(a){this.selectedList.hasOwnProperty(a)&&delete this.selectedList[a]},removeOldFeature:function(a){this.oldSelectedList.hasOwnProperty(a)&&delete this.oldSelectedList[a]},addFeature:function(a){var b,c=this.getFeatureById(a);if(this.selectedList.hasOwnProperty(a)&&delete this.selectedList[a],"colors"===c.category)for(b in this.selectedList)this.selectedList[b][0].group===c.group&&delete this.selectedList[b];return this.selectedList[c.id]=this.selectedList[c.id]||[],this.selectedList[c.id].push(c),this},addOldFeature:function(a){var b,c=this.getFeatureById(a);if(this.oldSelectedList.hasOwnProperty(a)&&delete this.oldSelectedList[a],c){if("colors"===c.category)for(b in this.oldSelectedList)this.oldSelectedList[b][0].group===c.group&&delete this.oldSelectedList[b];this.oldSelectedList[c.id]=this.oldSelectedList[c.id]||[],this.oldSelectedList[c.id].push(c)}return this},showDisableMask:function(a){var b=document.createElement("div");b.className="mask",a.parentNode.parentNode.appendChild(b)},hideDisableMask:function(a){var b;b=a.parentNode.parentNode,b.removeChild(d("mask","",b)[0])},loadDependencies:function(a){var b="",c=a.options[0]?a.options[0]:a.options,d=c.id,e=c.group,g=c.category,h=a.element.checked,i=f.bind(this.onLoadDependencies,this);this.showDisableMask(a.element),this.lastActionOption=a.element,this[h?"addFeature":"removeFeature"](d),b=h?this.config_invalid?"color"===g&&"exterior"==e?this.getDependenciesUrl(!0)+"colorid="+d:this.getDependenciesUrl(!0)+"optionid="+d:this.getDependenciesUrl(!0)+"selected="+d:this.config_invalid?this.getDependenciesUrl(!0):this.getDependenciesUrl(!0)+"optionid="+d+"&deselected="+d,this.vehicleApi.getDependenciesList(b,i)},getDependenciesUrl:function(a){var b,c,d,e="",f=a||!1,g=[],h=this.selectedList,i=!1,j=0;if(g.push("zip="+this.zipCode+"&"),g.push("styleid="+this.styleId+"&"),h&&f===!0)for(d in h)c=h[d][0],b=this.getFeatureElementById(c.id),b.disabled||("exterior"===c.group&&"colors"===c.category?(this.config_invalid?g.push("colorid="+c.id):g.push("optionid="+c.id),g.push("&"),i=!0,j+=1):"interior"===c.group&&"colors"===c.category?(g.push("optionid="+c.id),g.push("&"),j++):"interior_trim"===c.group&&"colors"===c.category?(g.push("optionid="+c.id),g.push("&"),j++):"roof"===c.group&&"colors"===c.category?(g.push("optionid="+c.id),g.push("&"),j++):"options"===c.category&&(this.config_invalid?(g.push("optionid="+c.id),g.push("&"),j++):(g.push("optionid="+c.id),g.push("&"),j++)));return 0===j&&f===!0&&this.config_invalid===!1&&g.push("optionid=&"),e=g.join(""),this.config_invalid===!0&&i&&e.match(/&colorid=&/g)&&(e=e.replace(/&colorid=&/g,"&")),e},getFeatureElementById:function(a){var b,c,d=this.elements,e=d.length;for(c=0;e>c;c+=1)d[c].getAttribute("data-id")===a&&(b=d[c]);return b},getFeatureById:function(a){var b,c,d=this.featuresMap,e=d.length;for(c=0;e>c;c+=1)d[c].id===a&&(b=d[c]);
return b},getInstanceByCategoryGroup:function(a,b){var c,d,e=this.groupControlsList,f=e.length;for(c=0;f>c;c+=1)e[c].category===a&&e[c].group===b&&(d=e[c]);return d},resetUnavailable:function(){var a,b,c,d=this.excludedItems;if(d&&d.length)for(c=d.length,a=0;c>a;a+=1)b=this.getFeatureById(d[a]),b&&"unavailable"===b.status&&this.handleIncludedExcludedFeatureUI(b.id,"unexcluded")},resetIncluded:function(){var a,b,c,d=this.includedItems;if(d&&d.length)for(c=d.length,a=0;c>a;a+=1)b=this.getFeatureById(d[a]),b&&b.included&&(b.available=!0,b.nullprice=!1,b.required=!1,this.removeFeature(b.id),this.addOldFeature(b.id),this.handleIncludedExcludedFeatureUI(b.id,"unincluded"))},onLoadDependencies:function(a,b){a&&!a.error?(this.resetUnavailable(),this.resetIncluded(),a.selectedOption&&this.handleSelected(a),a.deselectedOption&&this.handleDeselected(a),a.includedItems&&a.includedItems.length&&this.handleIncluded(a),a.requiredItems&&a.requiredItems.length&&this.handleRequired(a),a.furtherRemovals&&a.furtherRemovals.length&&this.handleRemovals(a),a.excludedItems&&a.excludedItems.length&&this.handleExcluded(a),this.includedItems=a.includedItems,this.excludedItems=a.excludedItems,this.trigger("update-selected",this.selectedList)):this.lastActionOption&&(this.lastActionOption.checked=!this.lastActionOption.checked),"preselect"!==b&&this.hideDisableMask(this.lastActionOption)},handleExcluded:function(a){var b,c=a.excludedItems,d=c.length;for(b=0;d>b;b+=1)null!==this.getFeatureById(c[b])&&(this.removeFeature(c[b]),this.addOldFeature(c[b]),this.handleIncludedExcludedFeatureUI(c[b],"unincluded"),this.handleIncludedExcludedFeatureUI(c[b],"excluded"))},handleSelected:function(a){var b,c=a.selectedOption;b=this.getFeatureById(c),null!==b&&(this.addFeature(c),this.removeOldFeature(c),this.handleIncludedExcludedFeatureUI(c,"checked"))},handleRequired:function(a){var b,c,d=a.requiredItems,e=d.length;for(b=0;e>b;b+=1)null!==this.getFeatureById(d[b])&&(c=this.getFeatureById(d[b]),c.required=!0,this.addFeature(d[b]),this.removeOldFeature(d[b]),c.included=!1,this.handleIncludedExcludedFeatureUI(d[b],"checked"),this.handleIncludedExcludedFeatureUI(d[b],"unexcluded"))},handleRemovals:function(a){var b,c,d=a.furtherRemovals,e=d.length;for(b=0;e>b;b+=1)c=this.getFeatureById(d[b]),null!==this.getFeatureById(d[b])&&(c.required=!1,this.removeFeature(d[b]),this.addOldFeature(d[b]),this.handleIncludedExcludedFeatureUI(d[b],"unincluded"))},handleIncluded:function(a){var b,c,d=a.includedItems,e=d.length;for(b=0;e>b;b+=1)c=this.getFeatureById(d[b]),null!==c&&(c.available=!1,this.addFeature(d[b]),this.removeOldFeature(d[b]),this.handleIncludedExcludedFeatureUI(d[b],"unincluded"),this.handleIncludedExcludedFeatureUI(d[b],"included"))},handleDeselected:function(a){var b=a.deselectedOption;null!==this.getFeatureById(b)&&(this.removeFeature(b),this.addOldFeature(b),this.handleIncludedExcludedFeatureUI(b,"unincluded"))},handleIncludedExcludedFeatureUI:function(a,b){var c=this.getFeatureElementById(a),d=this.getFeatureById(a);if(c&&b)switch(b){case"unincluded":this.setUnincluded(c,d);break;case"checked":this.setChecked(c,d);break;case"included":this.setIncluded(c,d);break;case"excluded":this.setUnAvailable(c,d);break;case"unexcluded":this.setAvailable(c,d)}},reCalculate:function(a,b,c){var e=document.getElementById(this.baseId+"_"+b.category+"_"+b.group),f=d("foot","",e.parentNode)[0].getElementsByTagName("button")[0],g=this.getInstanceByCategoryGroup(b.category,b.group);g.trigger(c,{element:a,options:b,head:e,footBtn:f})},setUnincluded:function(a,b){a.checked=!1,b.included&&!a.disabled&&this.reCalculate(a,b,"calculate"),b.included=!1,a.disabled=!1},setChecked:function(a,b){a.checked=!0,b.included&&"colors"!==b.category||this.reCalculate(a,b,"calculate"),b.required||(0===b.price||0===b.price.baseMSRP)&&(b.nullprice=!0),b.included=!0},setIncluded:function(a,b){a.checked=!0,b.included&&"colors"!==b.category||this.reCalculate(a,b,"change-color"),"options"===b.category&&(a.disabled=!0),b.included=!0},setAvailable:function(a,b){var c=new g(a.parentNode);a.disabled=!1,c.removeClass("disabled"),b.status="available"},setUnAvailable:function(a,b){var c=new g(a.parentNode);a.disabled=!0,c.addClass("disabled"),b.status="unavailable"}},b}(),a.namespace("nvc").OptionGroup=function(){function b(){e.call(this)}var e=a.mixin.Observable,f=(EDMUNDSAPI.Vehicle,a.dom.Element);return a.util.Function.bind,b.prototype={initialize:function(){},disableButton:function(a){return a.disabled=!0,this},enableButton:function(a){return a.disabled=!1,this},expand:function(a){var b,c,e=d("option","",document),g=new f(a);for(b=e.length-1;b>=0;b-=1)-1===e[b].className.indexOf("emptybg")&&(c=new f(e[b]),c.removeClass("active"));return g.addClass("active"),this},collapse:function(a){var b=new f(a);return b.removeClass("active"),this},collapsible:function(a){var b=a.className.indexOf("active")>-1?!0:!1;return this[b?"collapse":"expand"](a),this},bindOnChangeEvent:function(a,b,d,e){var f=this;return a[c?"onclick":"onchange"]=function(){f.trigger("change",{element:this,options:b,head:d,footBtn:e})},this},bindEvents:function(){return this.on("calculate",this.calculatePrice,this),this.on("change-color",this.changeColor,this),this},calculatePrice:function(a){var b=a.options[0]?a.options[0]:a.options,c=(b.type,parseInt(a.element.value,10)),e=a.element.checked,f=a.head,g=d("price","",f)[0].innerHTML.replace(/\$/,""),h=d("price","",f)[0],i=d("value","",f)[0],j=d("pic","",f)[0],k=d("secondary","",f)[0],l=f.parentNode.getElementsByTagName("input");return l.length,"colors"===b.category&&(this.makeDeselectedAll(l),e?(h.innerHTML=0>c?"($"+c.toString().replace(/-/,"")+")":"$"+c,i.innerHTML=b.name,j.style.background=a.element.getAttribute("data-primarycolor"),k.style.background=a.element.getAttribute("data-secondarycolor"),this.makeSelected(a.element)):(h.innerHTML="$0",i.innerHTML="Select a Color",j.removeAttribute("style"),j.setAttribute("style",""),j.className="pic default",k.removeAttribute("style"),k.setAttribute("style",""),this.makeDeselected(a.element))),"options"===b.category&&(g=-1===g.indexOf("(")?parseInt(g,10):-parseInt(g.replace(/\(|\)/g,""),10),g=e?g+c:g-c,h.innerHTML=0>g?"($"+g.toString().replace(/-/,"")+")":"$"+g),this},changeColor:function(a){var b=a.options[0]?a.options[0]:a.options,c=(b.type,a.element.checked),e=a.head,f=d("price","",e)[0],g=d("value","",e)[0],h=d("pic","",e)[0],i=d("secondary","",e)[0],j=e.parentNode.getElementsByTagName("input");return j.length,"colors"===b.category&&(this.makeDeselectedAll(j),c?(f.innerHTML="$0",g.innerHTML=b.name,h.style.background=a.element.getAttribute("data-primarycolor"),i.style.background=a.element.getAttribute("data-secondarycolor"),this.makeSelected(a.element)):(f.innerHTML="$0",g.innerHTML="Select a Color",h.removeAttribute("style"),h.className="pic default",i.removeAttribute("style"),this.makeDeselected(a.element))),this},makeSelected:function(a){a.checked=!0,a.parentNode.className="active"},makeDeselected:function(a){a.checked=!1,a.parentNode.className=""},makeDeselectedAll:function(a){var b,c=a.length;for(b=0;c>b;b+=1)a[b].checked=!1,a[b].parentNode.className=""}},b}(),a.namespace("nvc").RadioGroup=function(){function b(a,b,c,d,e){m.call(this),this.baseId=b,this.root=a,this.group=c,this.list=d,this.category=e,this.template=n(this.template)}var c,e,f,g,h,i,j,k,l,m=a.mixin.Observable,n=(EDMUNDSAPI.Vehicle,a.util.Function.bind,a.util.Function,a.util.Array,a.template);return b.prototype={render:function(){var a=document.createElement("div");return a.innerHTML=this.template({baseId:this.baseId,group:this.group}),a.className="option-group",this.root.appendChild(a),this.renderList(),this},renderList:function(){var a,b,i=this.list.length,m=this.list;for(c=document.getElementById(this.baseId+"_colors_"+this.group),e=d("head","",c)[0],h=d("price","",c)[0],f=d("list","",c)[0],g=d("foot","",c)[0],j=g.getElementsByTagName("button")[0],a=0;i>a;a+=1)k=m[a].price,k=0===m[a].price?0:m[a].price.baseMSRP,b=0>k?"($"+k.toString().replace(/-/,"")+")":"$"+k,l=document.createElement("label"),l.innerHTML=['<span class="price">'+b+"</span>",'<span class="pic" style="background-color:'+m[a].primaryColor+'">','<span class="secondary" style="background-color: '+m[a].secondaryColor+'"></span>',"<i></i>","</span>",'<input type="checkbox" data-primarycolor="'+m[a].primaryColor+'" data-secondarycolor="'+m[a].secondaryColor+'" data-id="'+m[a].id+'" id="for'+m[a].id+'" value="'+k+'" name="group_colors_'+this.group+'">','<span class="value">'+m[a].name+"</span>"].join(""),f.appendChild(l),l.setAttribute("for","for"+m[a].id);return this},init:function(){var a,b=this,d=this.list,f=d.length;for(i=c.getElementsByTagName("input"),e.onclick=function(){b.collapsible(this.parentNode)},j.onclick=function(a){return function(){b.collapsible(a)}}(e.parentNode),a=0;f>a;a+=1)this.bindOnChangeEvent(i[a],d[a],e,j);return this.bindEvents(),this},template:['<div class="name"><%= group %></div>','<div class="option colors-category" id="<%= baseId %>_colors_<%= group %>">','<div class="head"><span class="price">$0</span><span class="pic default"><span class="secondary"></span></span><span class="value">Select a Color</span></div>','<div class="option-wrap">','<div class="list"></div>','<div class="foot"><button type="button" class="button-small button-light">OK</button></div>',"</div>","</div>"].join("")},b}(),b.extend(a.nvc.RadioGroup.prototype,a.nvc.OptionGroup.prototype),a.namespace("nvc").CheckboxGroup=function(){function b(a,b,c,d,e){n.call(this),this.baseId=b,this.root=a,this.group=c,this.list=d,this.category=e,this.template=o(this.template)}var c,e,f,g,h,i,j,k,l,m,n=a.mixin.Observable,o=(EDMUNDSAPI.Vehicle,a.util.Function.bind,a.util.Function,a.util.Array,a.template);return b.prototype={render:function(){var a=document.createElement("div");return k=this.baseId+"_options_"+this.group,a.className="option",a.id=k,a.innerHTML=this.template({baseId:this.baseId,group:this.group}),this.root.appendChild(a),this.renderList(),this},renderList:function(){var a,b,i=this.list.length,n=this.list;for(c=document.getElementById(k),e=d("head","",c)[0],h=d("price","",c)[0],f=d("list","",c)[0],g=d("foot","",c)[0],j=g.getElementsByTagName("button")[0],a=0;i>a;a+=1)l=n[a].price,l=0===n[a].price?0:n[a].price.baseMSRP,b=0>l?"($"+l.toString().replace(/-/,"")+")":"$"+l,m=document.createElement("label"),m.innerHTML='<span class="price">'+b+'</span><input type="checkbox" data-id="'+n[a].id+'" id="for'+n[a].id+'" value="'+l+'" name="group_options_'+this.group+'"><span class="value">'+n[a].name+"</span>",f.appendChild(m),m.setAttribute("for","for"+n[a].id);return this},init:function(){var a,b=this,d=this.list,f=this.list.length;for(i=c.getElementsByTagName("input"),e.onclick=function(){b.collapsible(this.parentNode)},j.onclick=function(a){return function(){b.collapsible(a)}}(e.parentNode),a=0;f>a;a+=1)this.bindOnChangeEvent(i[a],d[a],e,j);return this.bindEvents(),this},template:['<div class="head"><span class="price">$0</span><span class="value"><%= group %></span></div>','<div class="option-wrap">','<div class="list"></div>','<div class="foot"><button type="button" class="button-small button-light">OK</button></div>',"</div>"].join("")},b}(),b.extend(a.nvc.CheckboxGroup.prototype,a.nvc.OptionGroup.prototype),a.namespace("nvc").FeesGroup=function(){function b(a,b,c,d,e){l.call(this),this.baseId=b,this.root=a,this.group=c,this.list=d,this.category=e,this.template=m(this.template)}var c,e,f,g,h,i,j,k,l=a.mixin.Observable,m=(EDMUNDSAPI.Vehicle,a.util.Function.bind,a.util.Function,a.util.Array,a.template);return b.prototype={render:function(){var a=document.createElement("div");return a.innerHTML=this.template({baseId:this.baseId,group:this.group}),a.className="option-group",this.root.appendChild(a),this.renderList(),this},renderList:function(){var a,b,l=this.list.length,m=this.list;for(c=document.getElementById(this.baseId+"_fees"),e=d("head","",c)[0],h=d("price","",c)[0],f=d("list","",c)[0],g=d("foot","",c)[0],i=g.getElementsByTagName("button")[0],a=0;l>a;a+=1)j=m[a].price,b=0>j?"($"+j.toString().replace(/-/,"")+")":"$"+j,k=document.createElement("label"),k.innerHTML=['<span class="price">'+b+"</span>",'<input type="checkbox" disabled="disabled" checked value="'+j+'" name="group_'+this.group+'">',"<span>"+m[a].name+"</span>"].join(""),f.appendChild(k);return this},init:function(){return this.bindEvents(),this},template:['<div class="name"><%= group %></div>','<div class="option emptybg" id="<%= baseId %>_fees">','<div class="list"></div>','<div class="foot"><button type="button" class="button-small" disabled="disabled">OK</button></div>',"</div>"].join("")},b}(),b.extend(a.nvc.FeesGroup.prototype,a.nvc.OptionGroup.prototype),a.namespace("nvc").ZipLocation=function(){function b(a,b){c.call(this),this.el=a,this.apiKey=b,this.initialize(b),this.bindEvents()}var c=a.mixin.Observable,e=EDMUNDSAPI.Vehicle,f=a.util.Function.bind,g=a.template;return b.prototype={initialize:function(a){this.vehicleApi=new e(a),this.template=g(this.template)},bindEvents:function(){this.on("update-zip",this.loadlocation,this)},render:function(b){var c,e=this;return this.el.innerHTML=this.template({}),c=d("zip-code","",this.el)[0],this.zipField=new a.ui.ZipField({apiKey:b}),c.appendChild(this.zipField.el),this.zipField.render(),this.zipField.valid=!0,this.button=this.el.getElementsByTagName("button")[0],this.button.onclick=function(){e.trigger("update-zip")},this.zipField.on("valid",function(){e.zipField.valid=!0,e.validate()}),this.zipField.on("error",function(){e.zipField.valid=!1,e.validate()}),this},loadlocation:function(){var a=f(this.onLocationLoad,this),b=this.zipField.el.value;this.vehicleApi.getUpdateLocation(b,a)},onLocationLoad:function(a){var b=this.parseLocation(a);this.renderLocation(b),this.trigger("location-load")},parseLocation:function(a){var b={state:a.regionsHolder?a.regionsHolder[0].name:null,stateCode:a.regionsHolder?a.regionsHolder[0].stateCode:null};return b},renderLocation:function(a){this.locationElement=d("state","",this.el)[0],this.locationElement.innerHTML=a.state?a.state+", "+a.stateCode:"Please click UPDATE button one more time."},validate:function(){return this.zipField.valid?(this.enableButton(),void 0):(this.disabledButton(),void 0)},enableButton:function(){this.button.disabled=!1},disabledButton:function(){this.button.disabled=!0},template:['<span class="name">Prices for Zip code</span>','<div class="zip-code tab2-zip"></div>','<button type="button" class="button-light">UPDATE</button>','<span class="state">&nbsp;</span>'].join("")},b}(),a.namespace("nvc").OptionsList=function(){function b(a,b){c.call(this),this.el=a,a.innerHTML="",this.totalPrice={},this.initialize(b),this.bindEvents()}var c=a.mixin.Observable,e=EDMUNDSAPI.Vehicle,f=a.util.Function.bind,g=a.template;return b.prototype={initialize:function(a){this.vehicleApi=new e(a),this.template=g(this.template)},bindEvents:function(){this.off()},render:function(a){function b(a){return function(){h.trigger("del-option",{id:a,element:this})}}var c,e,f,g,h=this;for(this.el.innerHTML=this.template({options:a.options,basePrice:a.basePrice,fees:a.fees,totalPrice:a.totalPrice}),this.totalPrice=a.totalPrice,c=d("remove","",this.el),f=c.length,e=0;f>e;e+=1)g=c[e].getAttribute("data-id"),c[e].onclick=b(g);return this.trigger("render"),this},resize:function(){var a,b,c,d,e,f=this.el.children;f.length<2||(a=f[0],b=f[1].children[0],c=f[2],d=b.offsetWidth,a.style.marginRight=0,c.style.marginRight=0,e=a.offsetWidth-d,a.style.marginRight=(0>e?0:e)+"px",e=c.offsetWidth-d,c.style.marginRight=(0>e?0:e)+"px")},loadList:function(a,b,c){var d,e=f(this.onListLoad,this),g=f(this.onListLoadError,this),h="";this.list=c,this.zip=a,this.styleid=b;for(d in c)h=h+"&optionid="+d;h+="&",this.el.innerHTML='<div class="loading">Loading options...</div>',this.vehicleApi.getOptionsList(h,a,b,e,g)},onListLoad:function(a){var b=this.parseList(a);this.trigger("listLoad",b.totalPrice),this.render(b)},onListLoadError:function(){this.trigger("listloaderror"),this.render([])},parseList:function(a){var b,c,d,e,f,g=[],h=this.list,i=a.tmv.nationalBasePrice,j=a.tmv.totalWithOptions,k=a.tmv.optionTMVPrices;for(b in k)f=h[b][0]?h[b][0]:h[b],g.push({id:b,name:f.name,required:f.required?!0:!1,nullprice:f.nullprice?f.nullprice:!1,available:f.available===!1?!1:!0,invioce:k[b].baseInvoice?k[b].baseInvoice<0?"($"+k[b].baseInvoice.toString().replace(/-/,"")+")":"$"+k[b].baseInvoice:0,tmv:k[b].tmv?k[b].tmv<0?"($"+k[b].tmv.toString().replace(/-/,"")+")":"$"+k[b].tmv:0,msrp:k[b].baseMSRP?k[b].baseMSRP<0?"($"+k[b].baseMSRP.toString().replace(/-/,"")+")":"$"+k[b].baseMSRP:0});return c={invoice:i.baseInvoice,tmv:i.tmv,msrp:i.baseMSRP},e={destinationCharge:a.tmv.destinationCharge||0,gasGuzzlerTax:a.tmv.gasGuzzlerTax||0,regionalAdFee:a.tmv.regionalAdFee||0},d={invoice:j.baseInvoice,tmv:j.tmv,msrp:j.baseMSRP},{options:g,basePrice:c,fees:e,totalPrice:d}},reset:function(){return this.el.innerHTML="",this},template:['<div class="list-header">',"<table>","<thead>",'<tr><th class="desc">Description</th><th class="price">MSRP</th></tr>','<tr class="base-price"><td class="desc"><div>Base Price</div></td><td class="price">$<%= basePrice.msrp %></td></tr>',"</thead>","</table>","</div>",'<div class="list-body scroll">',"<table>","<tbody>","<% for (var i = 0, length = options.length; i < length; i++) { %>",'<tr class="option-item" data-id="<%= options[i].id %>">','<td class="desc"><div><% if (options[i].available) { %><a data-id="<%= options[i].id %>" class="remove"><div class="nvcwidget-tooltip"><div class="arrow-left"></div>Delete</div></a><% } %><%= options[i].name %></div></td>','<td class="price"><% if (options[i].msrp === 0 && !options[i].nullprice && !options[i].required) { %><span>included</spat><% } else { %><%= options[i].msrp %><% } %></td></tr>',"<% } %>","<% if (fees.destinationCharge !== 0) { %>",'<tr><td class="desc"><div>Destination Fee</div></td><td class="price">$<%= fees.destinationCharge %></td></tr>',"<% } %>","<% if (fees.gasGuzzlerTax !== 0) { %>",'<tr><td class="desc"><div>Gas Guzzler Tax</div></td><td class="price">$<%= fees.gasGuzzlerTax %></td></tr>',"<% } %>","<% if (fees.regionalAdFee !== 0) { %>",'<tr><td class="desc"><div>Advertising Fee</div></td><td class="price">$<%= fees.regionalAdFee %></td></tr>',"<% } %>","</tbody>","</table>","</div>",'<div class="list-footer">',"<table>","<tfoot>",'<tr class="total-price"><td class="desc"><div>Total Price</div></td><td class="price">$<%= totalPrice.msrp %></td></tr>',"</tfoot>","</table>","</div>"].join("")},b}(),a.namespace("nvc").VehicleDealers=function(){function b(a){c.call(this),this.dealersChoiced={},this.initialize(a),this.bindEvents()}var c=a.mixin.Observable,d=EDMUNDSAPI.Vehicle,e=a.util.Function.bind,f=a.template;return b.prototype={initialize:function(a){this.vehicleApi=new d(a),this.template=f(this.template)},bindEvents:function(){this.off(),this.on("choice-dealer",this.updateDealerList,this)},render:function(a){function b(){return function(){f.trigger("choice-dealer",this)}}var c,d,e,f=this;for(a.length?(1===a.length&&(a[0].checked=!0,this.addDealer(a[0]),this.trigger("dealer-selected",this.dealersChoiced)),this.el.innerHTML=this.template({dealers:a}),this.trigger("dealers-available",!0)):(this.el.innerHTML='<div class="loading">There are no dealers in our network that are located within your location.</div>',this.trigger("dealers-available",!1)),c=this.el.getElementsByTagName("input"),d=c.length,e=0;d>e;e+=1)c[e].onchange=b();return this.trigger("render"),this},updateDealerList:function(a){var b=a.value,c=a.title;this[a.checked?"addDealer":"removeDealer"]({id:b,name:c}),this.trigger("dealer-selected",this.dealersChoiced)},removeDealer:function(a){this.dealersChoiced.hasOwnProperty(a.id)&&delete this.dealersChoiced[a.id]},addDealer:function(a){this.dealersChoiced.hasOwnProperty(a.id)&&delete this.dealersChoiced[a.id],this.dealersChoiced[a.id]={id:a.id,name:a.name}},loadDealers:function(a,b){function c(a){for(var b,c=[],d=a.length,e=0;d>e;e++)b=encodeURIComponent(decodeURIComponent(a[e])),c.push(b);return c}var d=e(this.onDealersLoad,this),f=e(this.onDealersLoadError,this),g=b.makeName,h=b.model,i=b.styleId,j=b.zipcode,k=b.radius,l=b.rows,m=b.isPublic,n=b.bookName,o=(b.apikey,c(b.keywords||[]).join(",")),p=b.premierOnly;this.el=a,this.options=b,this.el.innerHTML='<div class="loading">Loading dealers...</div>',this.dealersChoiced={},this.vehicleApi.getDealersList(g,h,i,j,k,l,m,n,o,p,d,f)},onDealersLoad:function(a){if(a.error)return this.onDealersLoadError();var b=this.parseDealers(a);this.trigger("dealersLoad"),this.render(b)},onDealersLoadError:function(){return this.el.innerHTML='<div class="loading"><p>The dealers have not been loaded.</p><p>Please press the "Update" button to reload dealers.</p></div>',this},parseDealers:function(a){var b,c,d,e,f,g,h=[],i=a.dealerHolder;if(i)for(d=i.length,b=0;d>b;b+=1){c=i[b],c.ratings.SALES_OVERALL_RATING?(e=parseInt(c.ratings.SALES_OVERALL_RATING,10),g=parseFloat(c.ratings.SALES_OVERALL_RATING),f=parseInt(c.ratings.SALES_RECOMMENDED_REVIEW_COUNT,10)+parseInt(c.ratings.SALES_NOT_RECOMMENDED_REVIEW_COUNT,10)):(e=0,g=0,f=0);var j=(g-e).toPrecision(1);j>=.7?e++:j>=.3&&(e+="_5"),h.push({id:c.id,name:c.name,logicalName:c.logicalName,state:c.address.stateName.replace(/ /g,""),city:c.address.city.replace(/ /g,""),address:c.address.city+", "+c.address.stateCode+" "+c.address.zipcode,phone:c.contactinfo.phone.split(", ").slice(0,1).join(", "),distance:parseFloat(c.displayinfo.dealer_distance).toFixed(2),rating:e,ratingFull:g,review:f,checked:!1})}return h},reset:function(){this.el.innerHTML=""},template:['<div class="list">',"<% for (var i = 0, length = dealers.length; i < length; i++) { %>",'<div class="item">','<input type="checkbox" value="<%= dealers[i].id %>" title="<%= dealers[i].name %>" name="dealers"<% if (dealers[i].checked) { %> checked="checked"<% } %>>','<div class="info">','<span class="name"><%= dealers[i].name %></span>','<span class="map"><span><%= dealers[i].distance %> mi</span><%= dealers[i].address %> <a href="http://www.edmunds.com/dealerships/<%= dealers[i].state %>/<%= dealers[i].city %>/<%= dealers[i].logicalName %>/" target="_blank"></a></span>','<span class="phone"><%= dealers[i].phone %></span>','<span class="rating r<%= dealers[i].rating %>" title="<%= dealers[i].ratingFull %>"></span>','<span class="reviews">','(<a href="http://www.edmunds.com/dealerships/<%= dealers[i].state %>/<%= dealers[i].city %>/<%= dealers[i].logicalName %>/sales.1.html" target="_blank"><%= dealers[i].review %> consumer review<% if (dealers[i].review > 1) { %>s<% } %></a>)',"</span>","</div>","</div>","<% } %>","</div>"].join("")},b}(),a.namespace("nvc").MessageDialog=function(){function b(){c.call(this),this.el=document.createElement("div"),this.el.className="nvcwidget-overlay",this.template=d(this.template)}var c=a.mixin.Observable,d=a.template;return b.prototype={render:function(a){return a=a||{},a.text||(a.text=["<p>Something went wrong when sending your form!</p>",'<p>Please return to the form and try again or <a href="Mailto:api@edmunds.com">contact</a> us directly.</p>'].join("")),this.el.innerHTML="",this.isSuccess=a.isSuccess,this.message=document.createElement("div"),this.message.className="nvcwidget-message",this.message.innerHTML=this.template({options:a}),this.message.className+=a.isSuccess?" success-message":" failure-message",this.el.appendChild(this.message),this},setMargin:function(){var a=this.message.offsetHeight;this.message.style.marginTop=-a/2+"px"},init:function(){var a=this.el.getElementsByTagName("button")[0];this.setMargin(),a.onclick=function(a){return function(){a.isSuccess===!0&&a.trigger("reset"),a.el.parentNode.removeChild(a.el)}}(this)},template:["<% if (options.isSuccess === true) { %>",'<div class="message-header">Thank you!</div>','<div class="message-body">',"<p>We have sent your request for a price quote on the</p>",'<p class="name"><%= options.name%></p>',"<p>to the following dealer(s)</p>","<ul>","<% for (var i = 0, length = options.dealers.length; i < length; i++) { %>","<li><%= options.dealers[i]%></li>","<% } %>","</ul>","</div>",'<div class="message-bottom">','<button type="reset" id="continue_button">Configure another vehicle</button>',"</div>","<% } else { %>",'<div class="message-header">Oh no...</div>','<div class="message-body">',"<%= options.text %>","</div>",'<div class="message-bottom">','<button type="button">Return and try again</button>',"</div>","<% } %>"].join("")},b}(),window._gaq=window._gaq||[],_gaq.push(["_setAccount","UA-24637375-1"]),_gaq.push(["_setDomainName",window.location.host]),_gaq.push(["_trackPageview"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}(window.EDM);